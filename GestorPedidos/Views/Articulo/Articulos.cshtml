@using Newtonsoft.Json;
@model List<Models.Models.Articulo>;
@{
    ViewData["Title"] = "Articulos";
}
<div>
    @if (TempData["art"] != null)
    {
        <h4>
            Artículo @(JsonConvert.DeserializeObject<Models.Models.Articulo>
            (TempData["art"].ToString()).Codigo)
            @(JsonConvert.DeserializeObject<Models.Models.Articulo>
                (TempData["art"].ToString()).Descripcion)
            creado con éxito
        </h4>
    }
</div>
<h1>Artículos</h1>

<div>
    <a class="btn btn-primary" asp-controller="Articulo" asp-action="NuevoArticulo">Nuevo Artículo</a>
</div>

<div>
    <form asp-controller="Articulo" asp-action="Articulos" method="get">
        <select name="codigo">
            <option value="">Codigo</option>
            @foreach  (var a in Model)
            {
                <option value="@a.IdArticulo">@a.Codigo</option>
            }
           
        </select>
        <select name="descripcion">
            <option value="">Descripcion</option>
            @foreach (var a in Model)
            {
                <option value="@a.IdArticulo">@a.Descripcion</option>
            }
        </select>
        <div>
            <label> Excluir Eliminados:</label>
            <input type="checkbox" value="Excluir eliminados" name="noEliminados" checked/>
        </div>

        <input type="submit" value="Filtrar" class="btn btn-primary"/>
    </form>
</div>
<div class="table-responsive text-center">
    <table class="table table-bordered table-dark">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Código</th>
                <th scope="col">Descripción</th>
                <th scope="col">Ver</th>
                <th scope="col">Eliminar</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var a in Model)
            {
                <tr>
                <td>@a.Codigo</td>
                <td>@a.Descripcion</td>
                <td><a href="/Articulo/VerArticulo?IdArticulo=@a.IdArticulo" class="btn btn-warning text-light">Ver</a></td>
                    @if(a.FechaBorrado==null) {
                <td> <a href="/Articulo/EliminarArticulo?IdArticulo=@a.IdArticulo" class="btn btn-danger text-light">Eliminar</a></td>
                }
                else
                {
                <td><p>Eliminado</p></td>
                    }
</tr>
            }

        </tbody>
    </table>
</div>
